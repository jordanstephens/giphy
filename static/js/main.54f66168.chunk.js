(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,n){e.exports=n(214)},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},214:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(28),i=n.n(o),c=n(118),l=n(21),u=n(15),s=n(20),d=n(89),f=n(109),h=n(54),m=n(26),p=n(16),g=n(17),v=n(38),E=n.n(v),_=function(){function e(t){Object(p.a)(this,e),this.host="https://api.giphy.com",this.api_key=t}return Object(g.a)(e,[{key:"search",value:function(e){return this.get("/v1/gifs/search",e)}},{key:"trending",value:function(e){return this.get("/v1/gifs/trending",e)}},{key:"gif",value:function(e){return this.get("/v1/gifs/".concat(e))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(m.a)({},t,{api_key:this.api_key}),r=E.a.stringify(Object.keys(n).reduce(function(e,t){return e[t]=encodeURIComponent(n[t]),e},{}));return window.fetch("".concat(this.host).concat(e,"?").concat(r)).then(function(e){if(!e.ok)throw new Error(e.statusText);return e}).then(function(e){return e.json()})}}]),e}(),b=["development","test","production"];var y,C=(y={api_key:{development:"WvmRe1f7z5VUC0eiaXaliDolwXvfKaZq",test:"test-api-key",production:"WvmRe1f7z5VUC0eiaXaliDolwXvfKaZq"},page_size:25,page_bumper_ratio:.2,grid_gutter_px:10,grid_column_width_px:200,grid_padding_px:20,overscan_px:0,max_fill_screen_loads:4,fill_screen_interval:1e3,fill_screen_timeout:1e3,colors:["rgb(0, 255, 153)","rgb(0, 204, 255)","rgb(153, 251, 255)","rgb(255, 102, 102)","rgb(255, 243, 92)"]},Object.keys(y).reduce(function(e,t){var n=b.some(function(e){return y[t].hasOwnProperty(e)})?y[t].production:y[t];return e[t]=n,e},{})),O=n(11),j=n(119).a.queue(function(e,t){e().then(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(void 0,[null].concat(n))},function(e){return t(e)})},1);function w(e,t){var n={FETCH_REQUESTED:"".concat(e,"/FETCH_REQUESTED"),FETCH_SUCCEEDED:"".concat(e,"/FETCH_SUCCEEDED"),FETCH_FAILED:"".concat(e,"/FETCH_FAILED"),RESET:"".concat(e,"/RESET")},r={offset:0,loading:!1,error:void 0,gifs:[]};return{ACTION:n,INITIAL_STATE:r,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.FETCH_REQUESTED:return Object(m.a)({},e,{loading:!0,error:void 0,offset:e.offset+t.payload.offset});case n.FETCH_FAILED:return Object(m.a)({},e,{loading:!1,error:t.payload.error});case n.FETCH_SUCCEEDED:return Object(m.a)({},e,{loading:!1,error:void 0,gifs:[].concat(Object(O.a)(e.gifs),Object(O.a)(t.payload.page.data))});case n.RESET:return r;default:return e}},actions:{loadNextPage:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(a,o){return new Promise(function(i,c){j.push(function(){var i=C.page_size,c=o()[e].offset;return a(function(e){return{type:n.FETCH_REQUESTED,payload:{offset:e}}}(c+i)),t(Object(m.a)({},r,{offset:c,limit:i})).then(function(e){return a(function(e){return{type:n.FETCH_SUCCEEDED,payload:{page:e}}}(e))}).catch(function(e){return a(function(e){return{type:n.FETCH_FAILED,payload:{error:e}}}(e))})},function(e,t){if(e)return c(e);i(t)})})}},reset:function(){return{type:n.RESET}}}}}var k=new _(C.api_key),S=w("trending",function(e){return k.trending(e)}),T=S.actions,x=S.reducer,D=new _(C.api_key),R=w("search",function(e){return D.search(e)}),N=R.actions,P=R.reducer,I=new _(C.api_key),F="gif/FETCH_REQUESTED",q="gif/FETCH_SUCCEEDED",H="gif/FETCH_FAILED",M="gif/RESET",U={loadGif:function(e){return function(t){return t({type:F}),I.gif(e).then(function(e){return t({type:q,payload:{gif:e}})}).catch(function(e){return t(function(e){return{type:H,payload:{error:e}}}(e))})}},reset:function(){return{type:M}}},A={loading:!1,error:void 0,gif:void 0},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(m.a)({},e,{loading:!0,error:void 0});case H:return Object(m.a)({},e,{loading:!1,error:t.payload.error});case q:return Object(m.a)({},e,{loading:!1,error:void 0,gif:t.payload.gif.data});case M:return A;default:return e}},z=function(e){return Object(s.c)({trending:x,search:P,gif:B,router:Object(h.b)(e)})},L=Object(u.b)();var W=n(14),G=n(12),X=(n(142),function(){return a.a.createElement("div",null,"Missing")}),Q=n(30),V=n(29),J=n(13),K=n(31),Z=(n(143),function(){return a.a.createElement("div",null,"Loading")}),Y=(n(144),function(e){var t=e.error;return a.a.createElement("div",null,t.message)}),$=function(e){var t=e.loading,n=e.error,o=e.children;return a.a.createElement(r.Fragment,null,o,t?a.a.createElement(Z,null):n?a.a.createElement(Y,{error:n}):null)},ee=n(66),te=n(43),ne=n(116),re=n.n(ne),ae=(n(207),function(e){function t(e){var n;Object(p.a)(this,t),n=Object(Q.a)(this,Object(V.a)(t).call(this,e));var r=C.grid_column_width_px;return n._masonry=void 0,n._columnCount=0,n._cache=new te.c({defaultWidth:r,defaultHeight:r,fixedWidth:!0}),n._onResize=n._onResize.bind(Object(J.a)(n)),n._cellRenderer=n._cellRenderer.bind(Object(J.a)(n)),n._updateColumnCount=n._updateColumnCount.bind(Object(J.a)(n)),n._resetCellPositioner=n._resetCellPositioner.bind(Object(J.a)(n)),n._setMasonryRef=n._setMasonryRef.bind(Object(J.a)(n)),n._initCellPositioner=n._initCellPositioner.bind(Object(J.a)(n)),n._checkScrollBottom=n._checkScrollBottom.bind(Object(J.a)(n)),n.loadInterval=void 0,n.loadTimer=void 0,n}return Object(K.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=C.max_fill_screen_loads,n=C.fill_screen_timeout,r=C.fill_screen_interval,a=0;window.setTimeout(function(){e.loadInterval=window.setInterval(function(){if(a>t)return window.clearInterval(e.loadInterval);e._checkScrollBottom()&&window.clearInterval(e.loadInterval),a++},r)},n)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.loadInterval),window.clearTimeout(this.loadTimer)}},{key:"_checkScrollBottom",value:function(){var e=document.body.clientHeight,t=e*C.page_bumper_ratio;return e>window.innerHeight+t||(this.props.onScrollBottom(),!1)}},{key:"_updateColumnCount",value:function(){var e=C.grid_gutter_px,t=C.grid_column_width_px;this._columnCount=Math.floor(this._width/(t+e))}},{key:"_initCellPositioner",value:function(){if("undefined"===typeof this._cellPositioner){var e=C.grid_gutter_px,t=C.grid_column_width_px;this._cellPositioner=Object(te.f)({cellMeasurerCache:this._cache,columnCount:this._columnCount,columnWidth:t,spacer:e})}}},{key:"_onResize",value:function(e){var t=e.width;this._width=t,this._updateColumnCount(),this._resetCellPositioner(),this._masonry.recomputeCellPositions(),this._checkScrollBottom()}},{key:"_cellRenderer",value:function(e){var t=e.index,n=e.key,r=e.parent,o=e.style,i=this.props.gifs[t],c=i.images.fixed_width,l=C.colors,u=l[i.id.charCodeAt("0")%l.length];return a.a.createElement(te.b,{cache:this._cache,index:t,key:n,parent:r},a.a.createElement("div",{className:"gif-container",style:o},a.a.createElement(ee.a,{to:"/gif/".concat(i.id),className:"gif-container-link"},a.a.createElement("picture",null,a.a.createElement("source",{srcSet:c.webp,type:"image/webp"}),a.a.createElement("img",{src:c.url,alt:i.title,height:c.height,width:c.width,style:{backgroundColor:u}})),a.a.createElement("div",{className:"hover-overlay"},a.a.createElement("h4",{className:"gif-title"},i.title),a.a.createElement("span",{className:"gif-time"},function(){return re.a.apply(void 0,arguments)}(i.import_datetime))))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.gifs,r=t.onScrollBottom;if(!n.length)return a.a.createElement("div",null,"There are no results to show");var o=C.overscan_px;return a.a.createElement(te.e,{overscanByPixels:o},function(t){var i=t.height,c=t.isScrolling,l=t.onChildScroll,u=t.scrollTop;return e._height=i,e._scrollTop=u,a.a.createElement(te.a,{disableHeight:!0,height:i,onResize:e._onResize,overscanByPixels:o,scrollTop:u},function(t){var i=t.width;return e._width=i,e._updateColumnCount(),e._initCellPositioner(),a.a.createElement(te.d,{autoHeight:!0,cellCount:n.length,cellMeasurerCache:e._cache,cellPositioner:e._cellPositioner,cellRenderer:e._cellRenderer,height:e._height,overscanByPixels:o,ref:e._setMasonryRef,scrollTop:e._scrollTop,width:i,isScrolling:c,onScroll:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var o=n[0],i=o.clientHeight,c=o.scrollHeight,u=i*C.page_bumper_ratio;e._scrollTop+i>c-u&&r(),l.apply(void 0,n)}})})})}},{key:"_resetCellPositioner",value:function(){var e=C.grid_gutter_px,t=C.grid_column_width_px;this._cellPositioner.reset({columnCount:this._columnCount,columnWidth:t,spacer:e})}},{key:"_setMasonryRef",value:function(e){this._masonry=e}}]),t}(a.a.PureComponent));ae.defaultProps={gifs:[]};var oe=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).loadMore=n.loadMore.bind(Object(J.a)(n)),n}return Object(K.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.actions;e.reset(),e.loadNextPage()}},{key:"loadMore",value:function(){this.props.actions.loadNextPage()}},{key:"render",value:function(){var e=this.props,t=e.gifs,n=e.loading,r=e.error;return a.a.createElement($,{loading:n,error:r},a.a.createElement(ae,{gifs:t,onScrollBottom:this.loadMore}))}}]),t}(a.a.Component),ie=Object(l.c)(function(e){var t=e.trending;return{loading:t.loading,error:t.error,gifs:t.gifs}},function(e){return{actions:Object(s.b)(T,e)}})(oe),ce=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).loadMore=n.loadMore.bind(Object(J.a)(n)),n}return Object(K.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.actions,n=e.location,r=E.a.parse(n.search.slice(1)).q;t.reset(),t.loadNextPage({q:r})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.actions,r=t.location,a=e.location;if(r!==a){var o=E.a.parse(a.search.slice(1)).q;n.reset(),n.loadNextPage({q:o})}}},{key:"loadMore",value:function(){var e=this.props,t=e.actions,n=e.location,r=E.a.parse(n.search.slice(1)).q;t.loadNextPage({q:r})}},{key:"render",value:function(){var e=this.props,t=e.gifs,n=e.loading,r=e.error;return a.a.createElement($,{loading:n,error:r},a.a.createElement(ae,{gifs:t,onScrollBottom:this.loadMore}))}}]),t}(a.a.Component),le=Object(l.c)(function(e){var t=e.search;return{loading:t.loading,error:t.error,gifs:t.gifs}},function(e){return{actions:Object(s.b)(N,e)}})(ce),ue=n(117),se=n.n(ue),de=(n(208),function(e){var t=e.gif;if(!t)return null;var n=t.images.original,r=C.colors,o=r[t.id.charCodeAt("0")%r.length];return a.a.createElement("section",null,a.a.createElement("div",null,a.a.createElement("header",null,a.a.createElement("h2",null,t.title)),a.a.createElement("main",null,a.a.createElement("picture",null,a.a.createElement("source",{srcSet:n.webp,type:"image/webp"}),a.a.createElement("img",{src:n.url,alt:t.title,height:n.height,width:n.width,style:{backgroundColor:o},className:"gif"})))),a.a.createElement("footer",null,a.a.createElement("dl",{className:"gif-info"},a.a.createElement("dt",null,"Source"),a.a.createElement("dd",null,a.a.createElement("a",{href:t.source,target:"_blank",rel:"noopener noreferrer"},t.source_tld)),a.a.createElement("dt",null,"Rating"),a.a.createElement("dd",null,t.rating.toUpperCase()),a.a.createElement("dt",null,"Uploaded"),a.a.createElement("dd",null,new Date(t.import_datetime).toLocaleDateString()),a.a.createElement("dt",null,"Dimensions"),a.a.createElement("dd",null,n.width," x ",n.height," px"),a.a.createElement("dt",null,"Size"),a.a.createElement("dd",null,se()(n.size)),a.a.createElement("dt",null,"Frames"),a.a.createElement("dd",null,n.frames))))}),fe=function(e){function t(){return Object(p.a)(this,t),Object(Q.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(K.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.actions,n=e.match;t.reset(),t.loadGif(n.params.id)}},{key:"render",value:function(){var e=this.props,t=e.gif,n=e.loading,r=e.error;return a.a.createElement($,{loading:n,error:r},a.a.createElement(de,{gif:t}))}}]),t}(a.a.Component),he=Object(l.c)(function(e){var t=e.gif;return{loading:t.loading,error:t.error,gif:t.gif}},function(e){return{actions:Object(s.b)(U,e)}})(fe),me=a.a.createElement(G.c,null,a.a.createElement(G.a,{exact:!0,path:"/",component:ie}),a.a.createElement(G.a,{exact:!0,path:"/search",component:le}),a.a.createElement(G.a,{exact:!0,path:"/gif/:id",component:he}),a.a.createElement(G.a,{component:X})),pe=(n(209),function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).state={q:n.props.q||""},n.onSubmit=n.onSubmit.bind(Object(J.a)(n)),n.onChange=n.onChange.bind(Object(J.a)(n)),n}return Object(K.a)(t,e),Object(g.a)(t,[{key:"onSubmit",value:function(e){var t=this.state.q;this.props.onSubmit(e,{q:t})}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({q:t})}},{key:"render",value:function(){return a.a.createElement("form",{onSubmit:this.onSubmit,className:"search-form"},a.a.createElement("input",{type:"text",name:"q",value:this.state.q,placeholder:"Search GIFs",onChange:this.onChange,className:"search-field"}),a.a.createElement("button",{type:"submit",className:"search-button"},"Go!"))}}]),t}(a.a.Component)),ge=(n(210),function(e){var t=e.q,n=e.onSearch;return a.a.createElement("div",{className:"header-container"},a.a.createElement("h1",null,a.a.createElement(ee.a,{to:"/",className:"logo"},"Giphy")),a.a.createElement(pe,{q:t,onSubmit:n}))});n(211);var ve=Object(l.c)(null,{push:W.d})(function(e){var t=e.push,n=e.history,r=Object(u.c)(window.location.hash.slice(1)),o=E.a.parse(r.search.slice(1)).q;return a.a.createElement(h.a,{history:n},a.a.createElement("div",{className:"section-container"},a.a.createElement("header",{className:"header-content"},a.a.createElement(ge,{q:o&&decodeURIComponent(o),onSearch:function(e,n){var r=n.q;e.preventDefault(),t("/search?q=".concat(encodeURIComponent(r)))}}))),a.a.createElement("div",{className:"section-container"},a.a.createElement("main",{className:"main-content"},me)),a.a.createElement("div",{className:"section-container footer"},a.a.createElement("div",{className:"footer-border"}),a.a.createElement("footer",{className:"footer-content"},"Giphy Viewer by ",a.a.createElement("a",{href:"https://jordanstephens.com"},"@jordanstephens"))))}),Ee=(n(212),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d;return Object(s.e)(z(L),e,t(Object(s.a)(f.a,Object(d.a)(L))))}());i.a.render(a.a.createElement(c.AppContainer,null,a.a.createElement(l.a,{store:Ee},a.a.createElement(ve,{history:L}))),document.getElementById("root"))}},[[120,1,2]]]);
//# sourceMappingURL=main.54f66168.chunk.js.map